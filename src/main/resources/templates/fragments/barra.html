<!-- barra.html -->
<div th:fragment="barra(activePage)">
  <!-- Hoja de estilos personalizada -->
  <link rel="stylesheet" href="/css/barra.css">

  <!-- Botón hamburguesa / close (mobile) -->
  <div class="menu">
    <ion-icon name="menu-outline"></ion-icon>
    <ion-icon name="close-outline"></ion-icon>
  </div>

  <!-- Barra lateral -->
  <div class="barra-lateral">
    <!-- Logo -->
    <div class="logo-admin d-flex align-items-center justify-content-center flex-column">
      <img th:src="@{/img/dualstore.png}" alt="DualStore Logo" class="logo-img mb-2">
      <span class="fw-bold fs-5 brand">DualStore</span>
      <span class="panel-text">Panel Admin</span>
    </div>

    <!-- Navegación -->
    <nav class="navegacion">
      <ul class="main-nav">        <li class="menu-item" th:classappend="${activePage == 'dashboard'} ? ' active'">
          <a th:href="@{/admin/dashboard}">
            <ion-icon name="grid-outline"></ion-icon>
            <span>Dashboard</span>
          </a>
        </li>
        <li class="menu-item" th:classappend="${activePage == 'productos'} ? ' active'">
          <a th:href="@{/admin/productos}">
            <ion-icon name="shirt-outline"></ion-icon>
            <span>Productos</span>
          </a>
        </li>        <li class="menu-item" th:classappend="${activePage == 'categorias'} ? ' active'">
          <a th:href="@{/admin/categoria}">
            <ion-icon name="pricetags-outline"></ion-icon>
            <span>Categorías</span>
          </a>
        </li>
        <li class="menu-item" th:classappend="${activePage == 'unidadmedida'} ? ' active'">
          <a th:href="@{/admin/unidadmedida}">
            <ion-icon name="cube-outline"></ion-icon>
            <span>Unidades de Medida</span>
          </a>
        </li>
        <li class="menu-item" th:classappend="${activePage == 'usuarios'} ? ' active'">
          <a th:href="@{/admin/usuarios}">
            <ion-icon name="person-outline"></ion-icon>
            <span>Usuarios</span>
          </a>
        </li>        <li class="menu-item" th:classappend="${activePage == 'roles'} ? ' active'">
          <a th:href="@{/admin/roles}">
            <ion-icon name="key-outline"></ion-icon>
            <span>Roles</span>
          </a>
        </li>
      </ul>
    </nav>    <!-- Usuario -->
    <div class="admin-user mt-auto mb-4 px-3">
      <div class="linea"></div>
      
      <!-- Dropdown del usuario -->
      <div class="user-dropdown" id="userDropdown">
        <a href="#" class="dropdown-item" onclick="showUserInfo()">
          <ion-icon name="person-circle-outline"></ion-icon>
          <span>Perfil</span>
        </a>
        <a href="#" class="dropdown-item" onclick="showSettings()">
          <ion-icon name="settings-outline"></ion-icon>
          <span>Configuración</span>
        </a>        <form action="/admin/logout" method="post" style="margin: 0;" onsubmit="return confirmLogout()">
          <button type="submit" class="dropdown-item logout" style="width: 100%; border: none; background: none; text-align: left;">
            <ion-icon name="log-out-outline"></ion-icon>
            <span>Cerrar Sesión</span>
          </button>
        </form>
      </div>
      
      <div class="usuario" id="userToggle">
        <img th:src="@{/img/dualstore.png}" alt="Usuario" class="user-img me-2">
        <div class="info-usuario">
          <span class="nombre">AdminDualStore</span>
        </div>
        <ion-icon name="ellipsis-vertical-outline" class="icon-more"></ion-icon>
      </div>
    </div>
  </div>

  <!-- Overlay móvil -->
  <div class="sidebar-overlay"></div>

  <!-- Ionicons -->
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <!-- Lógica JS de la barra -->
  <script th:src="@{/js/barra.js}"></script>
</div>